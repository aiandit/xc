From: Johannes Willkomm <j.willkomm@fionec.de>
Date: Thu, 1 Sep 2022 14:22:38 +0200
Subject: Polls support request timeouts

---
 xc/login/static/js/xc.js | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/xc/login/static/js/xc.js b/xc/login/static/js/xc.js
index 8b4aea5..fb58376 100644
--- a/xc/login/static/js/xc.js
+++ b/xc/login/static/js/xc.js
@@ -650,13 +650,14 @@ var ppPolls = function(subtree, done) {
 		}
 	    }
 	    var method = el.dataset.pollMethod || 'get'
+	    var timeout = el.dataset.pollTimeout
 	    if (method.toLowerCase() == 'post') {
 		var parts = url.split('?')
 		var rdata = parts[1] + '&csrfmiddlewaretoken=' + xc.getCSRFToken()
 		var headers = {'Content-type': 'application/x-www-form-urlencoded'}
-		xlp.sendPost(parts[0], rdata, headers, handleResult)
+		xlp.sendPost(parts[0], rdata, headers, handleResult, timeout)
 	    } else {
-		xlp.sendGet(url, handleResult)
+		xlp.sendGet(url, handleResult, timeout)
 	    }
 	}
 	if (el.attributes.id == undefined) {
