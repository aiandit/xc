From: Johannes Willkomm <j.willkomm@fionec.de>
Date: Wed, 31 Aug 2022 15:04:09 +0200
Subject: For sortCol, find preceding td or th as index

---
 xc/login/static/js/xc.js | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/xc/login/static/js/xc.js b/xc/login/static/js/xc.js
index 71317d0..9e6e3da 100644
--- a/xc/login/static/js/xc.js
+++ b/xc/login/static/js/xc.js
@@ -1192,7 +1192,7 @@ xc.xq = function(exp, node) {
 
 xc.sortCol = function(ev) {
     var t = event.target
-    var ind = xc.xq('count(preceding-sibling::x:td)', t)
+    var ind = xc.xq('count(preceding-sibling::x:td|preceding-sibling::x:th)', t)
     var table = xc.xq('ancestor::x:table', t)[0]
     var rows = xc.xq('x:tbody/x:tr', table)
     var vals = rows.map(function(row) {
